<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{template.html}">
<head>
	<meta charset="UTF-8" />
	<title>Lista de Egressos do seu curso</title>
	<link rel="stylesheet"
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
		crossorigin="anonymous" />
	<style>
		body {
			background-color: #f4f4f4;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}
		h1, h2 {
			color: #990000;
			font-weight: 700;
		}
		.container {
			margin-top: 40px;
			margin-bottom: 40px;
		}
		.filtro-form {
			background: #fff;
			padding: 20px 25px;
			border-radius: 12px;
			box-shadow: 0 6px 20px rgba(0,0,0,0.1);
			margin-bottom: 30px;
		}
		.btn-fatec {
			background-color: #990000;
			color: #fff;
			border: none;
			padding: 10px 25px;
			border-radius: 6px;
			font-weight: 600;
			transition: background-color 0.3s ease;
		}
		.btn-fatec:hover {
			background-color: #b30000;
			color: #fff;
		}
		.table thead {
			background-color: #e9ecef;
			font-weight: 600;
		}
		.table td, .table th {
			vertical-align: middle;
			text-align: center;
		}
		.btn-primary, .btn-danger {
			min-width: 90px;
			font-weight: 600;
			border-radius: 6px;
		}
	</style>
</head>
<body>
	<header th:replace="~{fragmentos/header :: header(activePage='validarEgresso')}"></header>

	<div class="container">
		<div class="filtro-form mx-auto" style="max-width: 400px;">
			<h2 class="text-center mb-3">Filtros</h2>
			<form method="get" action="/egresso/filtrar">
				<div class="mb-3">
					<label for="cursoId" class="form-label">Selecione o seu curso:</label>
					<select class="form-select" name="cursoId" id="cursoId" required>
						<option value="" selected>-- Selecione --</option>
						<option th:each="curso : ${cursos}"
							th:value="${curso.id}"
							th:text="${curso.nome}">
						</option>
					</select>
				</div>
				<div class="text-center">
					<button type="submit" class="btn btn-fatec px-4">Filtrar</button>
				</div>
			</form>
		</div>

		<h1 class="text-center mb-4">Lista de Possíveis Egressos</h1>
		
		<div class="table-responsive">
			<table class="table table-bordered table-hover shadow-sm bg-white rounded">
				<thead>
					<tr class="table-info">
						<th>Nome</th>
						<th>Nome do curso</th>
						<th>Ano de conclusão</th>
						<th>Comentário FATEC</th>
						<th>Comentário Livre</th>
						<th>Opções</th>
					</tr>
				</thead>
				<tbody>
					<tr class="table-primary" th:each="egresso : ${egressos}">
						<td th:text="${egresso.nome}"></td>
						<td th:text="${egresso.curso.nome}"></td>
						<td th:text="${egresso.ano}"></td>
						<td th:text="${egresso.comentarioFATEC}"></td>
						<td th:text="${egresso.comentario}"></td>
						<td class="d-flex flex-column flex-md-row justify-content-center gap-2">
							<form action="/coordenador/aprovarEgresso" method="post" class="mb-2 mb-md-0">
								<input type="hidden" name="id" th:value="${egresso.id}" />
								<input type="submit" class="btn btn-primary" value="Aprovar" />
							</form>
							<form action="/coordenador/reprovarEgresso" method="post" class="">
								<input type="hidden" name="_method" value="delete" />
								<input type="hidden" name="id" th:value="${egresso.id}" />
								<input type="submit" class="btn btn-danger" value="Reprovar" />
							</form>
						</td>
					</tr>
					<tr th:if="${#lists.isEmpty(egressos)}">
						<td colspan="6" class="text-center text-muted fst-italic">Nenhum egresso encontrado.</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
